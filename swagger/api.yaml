---
  swagger: '2.0'
  info:
    version: '0.1'
    title: Marugoto
    description: Marugoto Game Backend
    contact:
      name: Pim Witlox
    license:
      name: GPLv2
  basePath: /api/v1
  consumes:
    - application/json
  produces:
    - application/json
  securityDefinitions:
    tokenHeader:
      type: apiKey
      in: header
      name: X-TOKEN
      x-apikeyInfoFunc: api.auth.user_by_token
  paths:
    /login:
      post:
        summary: login
        operationId: api.auth.login
        parameters:
          - name: player
            in: body
            description: Player to login
            required: true
            schema:
              $ref: '#/definitions/Player'
        responses:
          200:
            description: authorization token
            schema:
              type: string
          401:
            description: unauthorized
          500:
            description: error while logging in
    /logout:
      post:
        summary: logout
        operationId: api.auth.logout
        responses:
          200:
            description: logged out
        security:
          - tokenHeader: []
    /register:
      post:
        summary: register new player
        operationId: api.auth.register
        parameters:
          - name: player
            in: body
            description: Player to be added
            required: true
            schema:
              $ref: '#/definitions/Player'
        responses:
          201:
            description: player created
            schema:
              type: string
          422:
            description: incorrect input, password requirements not met
            schema:
              type: string
          500:
            description: error during creation
            schema:
              type: string
  definitions:
    Player:
      type: object
      required:
        - mail
      properties:
        id:
          type: string
        mail:
          type: string
        password:
          type: string
